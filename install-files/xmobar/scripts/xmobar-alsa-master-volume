#!/usr/bin/env bash

# xmobar-alsa-master-volume
# author: Seong Yong-ju <sei40kr@gmail.com>

if ! hash amixer 2>/dev/null; then
    echo "ERROR: amixer was not found." >&2
    exit 1
fi

amixer get Master | awk -F'[][]' '
    /dB/ {
        printf "<fn=6>"
        vol = substr($2, 0, length($2) - 1) + 0
        if ($6 == "off")    printf "ﱝ"
        else if (vol == 0)  printf "婢"
        else if (vol <= 33) printf "奄"
        else if (vol <= 66) printf "奔"
        else                printf "墳"
        print "</fn>"
    }'
