" -*- mode: vimrc -*-

let mapleader = " "

" Selected Intellimacs modules
source ~/.intellimacs/spacemacs/buffers.vim
source ~/.intellimacs/spacemacs/help.vim
source ~/.intellimacs/spacemacs/misc.vim
source ~/.intellimacs/spacemacs/search-symbol.vim
source ~/.intellimacs/hybrid.vim

" My own vim commands
set clipboard+=unnamed
set commentary
set easymotion
set history
set idearefactormode=visual
set matchpairs
set number
set relativenumber
set surround
set wrapscan

" +buffer
noremap <Leader>bK :<C-u>qa!<CR>
noremap <Leader>bO :<C-u>action CloseAllEditorsButActive<CR>
noremap <Leader>bS :<C-u>wa<CR>
noremap <Leader>bd :<C-u>q!<CR>
noremap <Leader>bk :<C-u>q!<CR>
noremap <Leader>bs :<C-u>w<CR>

" +code
noremap <Leader>cD :<C-u>action ShowUsages<CR>
noremap <Leader>ca :<C-u>action ShowIntentionActions<CR>
noremap <Leader>cd gd
noremap <Leader>cf :<C-u>action ReformatCode<CR>
noremap <Leader>ci :<C-u>action OptimizeImports<CR>
noremap <Leader>ck :<C-u>action QuickJavaDoc<CR>
noremap <Leader>cr :<C-u>action RenameElement<CR>

" +file
noremap <Leader>fr :<C-u>action RecentFiles<CR>
noremap <Leader>fs :<C-u>w<CR>

" +insert
nnoremap <Leader>is :<C-u>action InsertLiveTemplate<CR>
vnoremap <Leader>is <Esc>:<C-u>action InsertLiveTemplate<CR>

" +open
noremap <Leader>oP :<C-u>action SelectInProjectView<CR>

" +project
noremap <Leader>pp :<C-u>action ManageRecentProjects<CR>
noremap <Leader>pt :<C-u>action ActivateTODOToolWindow<CR>

" +window
noremap <Leader>wW <C-w>W
noremap <Leader>wc <C-w>c
noremap <Leader>wd <C-w>c
noremap <Leader>wh <C-w>h
noremap <Leader>wj <C-w>j
noremap <Leader>wk <C-w>k
noremap <Leader>wl <C-w>l
noremap <Leader>ws <C-w>s
noremap <Leader>wv <C-w>v
noremap <Leader>ww <C-w>w


;; expand-region
noremap <C-S-=> :<C-u>action EditorSelectWord<CR>
noremap <C-=> :<C-u>action EditorUnSelectWord<CR>


" Previous/next method
nnoremap [[ :<C-u>action MethodUp<CR>
nnoremap ]] :<C-u>action MethodDown<CR>

" Insert line above/below
nnoremap [<Space> o<Esc>k
vnoremap [<Space> <Esc>o<Esc>k
nnoremap ]<Space> O<Esc>j
vnoremap ]<Space> <Esc>O<Esc>j

" Go to previous/next VCS change marker
nnoremap [d :<C-u>action VcsShowPrevChangeMarker<CR>
nnoremap ]d :<C-u>action VcsShowNextChangeMarker<CR>

" Go to previous/next error
nnoremap [e :<C-u>action GotoPreviousError<CR>
nnoremap ]e :<C-u>action GotoNextError<CR>

" Previous/next tab
noremap <A-Left> :<C-u>action PreviousTab<CR>
noremap <A-Right> :<C-u>action NextTab<CR>

nnoremap <Esc> :<C-u>nohl<CR><Esc>
imap jk <Esc>
vmap jk <Esc>

;; Retain visual-mode on selection shift
vnoremap < <gv
vnoremap > >gv
