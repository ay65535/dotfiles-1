#!/bin/sh

# e
# author: Seong Yong-ju <sei40kr@gmail.com>

if [ "$2" = '-' ]; then
  tempfile="$(mktemp "tmp.emacs.XXXXXXX" --tmpdir)"
  cat - >"$tempfile"
  emacsclient -a '' -c "$tempfile"
else
  # shellcheck disable=SC2015
  emacsclient -a '' -e '(frame-list)' 2>/dev/null \
    | grep -oE '#<frame\s+[+>]+>' \
    && emacsclient -a '' "$@" \
    || emacsclient -a '' -c "$@"
fi
